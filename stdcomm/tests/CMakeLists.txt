#
# Copyright 2024 zhlinh and ccgo Project Authors. All rights reserved.
# Use of this source code is governed by a MIT-style
# license that can be found at
#
# https://opensource.org/license/MIT
#
# The above copyright notice and this permission
# notice shall be included in all copies or
# substantial portions of the Software.

cmake_minimum_required(VERSION 3.14)

include(${CMAKE_SOURCE_DIR}/cmake/CMakeUtils.cmake)
include(${CMAKE_SOURCE_DIR}/cmake/CMakeExtraFlags.cmake)

set(TEMPLATE_SUB_LIB_NAME "")
generate_library_name(TEMPLATE_SUB_LIB_NAME ${CMAKE_CURRENT_SOURCE_DIR})

message(STATUS "Generating Tests library [${TEMPLATE_SUB_LIB_NAME}]")

project(${TEMPLATE_SUB_LIB_NAME})

file(GLOB_RECURSE TEST_FILES
        "${CMAKE_CURRENT_SOURCE_DIR}"
        "*.cc"
        "*.c"
        "*.cpp"
        "*.mm"
        "*.m"
)

add_cc_library(
        NAME
        ${TEMPLATE_SUB_LIB_NAME}
        SRCS
        ${TEST_FILES}
        PUBLIC
        TESTONLY
)
